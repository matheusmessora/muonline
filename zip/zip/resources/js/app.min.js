function clearInput(a){$("#g-"+a).removeClass("has-success has-feedback has-error"),$("#ig-"+a).removeClass("glyphicon-ok glyphicon-remove"),$("#h-"+a).show(),$("#e-"+a).html(""),$("#e-"+a).hide()}function markSuccessOnField(a){$("#g-"+a).addClass("has-success has-feedback"),$("#ig-"+a).addClass("glyphicon-ok")}function loginExist(){return!1}!function(a){function b(b,c,h){var i,l,m,n=this;return c=c||{},m=a.extend(!0,{async:!0,overwriteCache:!1,complete:null,success:null,error:function(){a(this).each(function(){a(this).html(m.errorMessage)})},errorMessage:"There was an error loading the template.",paged:!1,pageNo:1,elemPerPage:10,append:!1,prepend:!1,beforeInsert:null,afterInsert:null,bindingOptions:{ignoreUndefined:!1,ignoreNull:!1,ignoreEmptyString:!1}},h),"array"===a.type(c)?e.call(this,b,c,m):(d(b)||(i=a(b),"string"==typeof b&&0===b.indexOf("#")&&(m.isFile=!1)),l=m.isFile||"undefined"==typeof m.isFile&&("undefined"==typeof i||0===i.length),l&&!m.overwriteCache&&w[b]?g(b,n,c,m):l&&!m.overwriteCache&&w.hasOwnProperty(b)?f(b,n,c,m):l?j(b,n,c,m):k(i,n,c,m),this)}function c(b,c){c?y[b]=c:y=a.extend(y,b)}function d(a){return"string"==typeof a&&a.indexOf("/")>-1}function e(c,d,e){e=e||{};var f,g=this,h=d.length,i=e.prepend&&!e.append,j=0,k=0,l=!1;if(e.paged){var m=(e.pageNo-1)*e.elemPerPage;d=d.slice(m,m+e.elemPerPage),h=d.length}return f=a.extend({},e,{complete:function(){this.html&&(i?g.prepend(this.html()):g.append(this.html())),j++,(j===h||l)&&(l&&e&&"function"==typeof e.error&&e.error.call(g),e&&"function"==typeof e.complete&&e.complete())},success:function(){k++,k===h&&e&&"function"==typeof e.success&&e.success()},error:function(){l=!0}}),e.append||e.prepend||g.html(""),i&&d.reverse(),a(d).each(function(){var d=a("<div/>");return b.call(d,c,this,f),l?!1:void 0}),this}function f(a,b,c,d){x[a]?x[a].push({data:c,selection:b,settings:d}):x[a]=[{data:c,selection:b,settings:d}]}function g(a,b,c,d){var e=w[a].clone();l.call(b,e,c,d),"function"==typeof d.success&&d.success()}function h(){return(new Date).getTime()}function i(a){return-1!==a.indexOf("?")?a+"&_="+h():a+"?_="+h()}function j(b,c,d,e){var f=a("<div/>");w[b]=null;var g=b;e.overwriteCache&&(g=i(g)),a.ajax({url:g,async:e.async,success:function(a){f.html(a),n(f,b,c,d,e)},error:function(){m(b,c,d,e)}})}function k(b,c,d,e){var f=a("<div/>");(b.is("script")||b.is("template"))&&(b=a.parseHTML(a.trim(b.html()))),f.html(b),l.call(c,f,d,e),"function"==typeof e.success&&e.success()}function l(b,c,d){o(b,c,d),a(this).each(function(){var c=a(b.html());d.beforeInsert&&d.beforeInsert(c),d.append?a(this).append(c):d.prepend?a(this).prepend(c):a(this).html(c),d.afterInsert&&d.afterInsert(c)}),"function"==typeof d.complete&&d.complete.call(a(this))}function m(b,c,d,e){var f;for("function"==typeof e.error&&e.error.call(c),a(x[b]).each(function(a,b){"function"==typeof b.settings.error&&b.settings.error.call(b.selection)}),"function"==typeof e.complete&&e.complete.call(c);x[b]&&(f=x[b].shift());)"function"==typeof f.settings.complete&&f.settings.complete.call(f.selection);"undefined"!=typeof x[b]&&x[b].length>0&&(x[b]=[])}function n(a,b,c,d,e){var f;for(w[b]=a.clone(),l.call(c,a,d,e),"function"==typeof e.success&&e.success.call(c);x[b]&&(f=x[b].shift());)l.call(f.selection,w[b].clone(),f.data,f.settings),"function"==typeof f.settings.success&&f.settings.success.call(f.selection)}function o(b,c,d){c=c||{},p("data-content",b,c,d,function(a,b){a.html(v(a,b,"content",d))}),p("data-content-append",b,c,d,function(a,b){a.append(v(a,b,"content",d))}),p("data-content-prepend",b,c,d,function(a,b){a.prepend(v(a,b,"content",d))}),p("data-content-text",b,c,d,function(a,b){a.text(v(a,b,"content",d))}),p("data-src",b,c,d,function(a,b){a.attr("src",v(a,b,"src",d))},function(a){a.remove()}),p("data-href",b,c,d,function(a,b){a.attr("href",v(a,b,"href",d))},function(a){a.remove()}),p("data-alt",b,c,d,function(a,b){a.attr("alt",v(a,b,"alt",d))}),p("data-id",b,c,d,function(a,b){a.attr("id",v(a,b,"id",d))}),p("data-value",b,c,d,function(a,b){a.attr("value",v(a,b,"value",d))}),p("data-link",b,c,d,function(b,c){var e=a("<a/>");e.attr("href",v(b,c,"link",d)),e.html(b.html()),b.html(e)}),p("data-link-wrap",b,c,d,function(b,c){var e=a("<a/>");e.attr("href",v(b,c,"link-wrap",d)),b.wrap(e)}),p("data-options",b,c,d,function(b,c){a(c).each(function(){var c=a("<option/>");c.attr("value",this).text(this).appendTo(b)})}),s(b,c,d)}function p(b,c,d,e,f,g){a("["+b+"]",c).each(function(){var c=a(this),h=c.attr(b),i=u(d,h);return q(c,i,e)?(c.removeAttr(b),void("undefined"!=typeof i&&f?f(c,i):g&&g(c))):void c.remove()})}function q(a,b,c){var d=r(a,c);return d.ignoreUndefined&&"undefined"==typeof b?!1:d.ignoreNull&&null===b?!1:d.ignoreEmptyString&&""===b?!1:!0}function r(b,c){var d={};return b instanceof jQuery&&b.attr("data-binding-options")?(d=a.parseJSON(b.attr("data-binding-options")),b.removeAttr("data-binding-options")):"object"==typeof b&&b.hasOwnProperty("bindingOptions")&&(d=b.bindingOptions),a.extend({},c.bindingOptions,d)}function s(b,c,d){a("[data-template-bind]",b).each(function(){var b=a(this),e=a.parseJSON(b.attr("data-template-bind"));b.removeAttr("data-template-bind"),a(e).each(function(){var e;if(e="object"==typeof this.value?u(c,this.value.data):u(c,this.value),this.attribute){if(!q(this,e,d))return void b.remove();switch(this.attribute){case"content":b.html(t(b,e,this));break;case"contentAppend":b.append(t(b,e,this));break;case"contentPrepend":b.prepend(t(b,e,this));break;case"contentText":b.text(t(b,e,this));break;case"options":var f=this;a(e).each(function(){var c=a("<option/>");c.attr("value",this[f.value.value]).text(t(b,this[f.value.content],f)).attr("selected",void 0==typeof this[f.value.selected]?!1:this[f.value.selected]).appendTo(b)});break;default:b.attr(this.attribute,t(b,e,this))}}})})}function t(a,b,c,d){return c.formatter&&y[c.formatter]?function(d){return y[c.formatter].call(a,b,c.formatOptions,d)}(d):b}function u(a,b){if("this"===b)return a;for(var c,d=b.split("."),e=a;(c=d.shift())&&"undefined"!=typeof e&&null!=e;)e=e[c];return e}function v(b,c,d,e){var f,g=b.attr("data-format-target");if((g===d||!g&&"content"===d)&&(f=b.attr("data-format"),f&&"function"==typeof y[f])){var h=b.attr("data-format-options");return function(d){return y[f].call(b[0],c,h,a.extend({},d))}(e)}return c}var w={},x={},y={};c("nestedTemplateFormatter",function(b,c,d){if(c){"string"==typeof c&&"{"===c[0]&&(c=a.parseJSON(c));var e=c.parentElement||"div",f=c.template||c;return c.parentElement?a("<"+e+"/>").loadTemplate(f,b,d):a("<"+e+"/>").loadTemplate(f,b,d).children()}}),a.fn.loadTemplate=b,a.addTemplateFormatter=c}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});var PANDOX=PANDOX||{};PANDOX.SYSTEM=function(){var a=function(){b()},b=function(){var a=$.cookie("X-WOMU-Auth");if(PANDOX.UTIL.isBlank(a))$("#menu-avatar").hide(),$("#menu-login").show();else{$.get("/api/me",function(a){a?($("#menu-avatar").show(),$("#menu-login").hide()):($("#menu-avatar").hide(),$("#menu-login").show())}).fail(function(){$("#menu-avatar").hide(),$("#menu-login").show()})}},c=function(a){0,$.cookie("X-WOMU-Auth",a,{path:"/"})};return{init:a,createAuthCookie:c}}(),PANDOX.LOGIN=function(){var a=function(){0,$("#loginForm").submit(function(a){a.preventDefault(),b()})},b=function(){0;var a=!1,b=$("#i-login").val();PANDOX.UTIL.isBlank(b)&&(PANDOX.FORM.markErrorOnField("login","Login é obrigatório"),a=!0);var c=$("#i-password").val();if(PANDOX.UTIL.isBlank(c)&&(PANDOX.FORM.markErrorOnField("password","Senha é obrigatório"),a=!0),!a){var d={login:b,password:c},e=$.ajax({url:"/api/login",type:"POST",data:JSON.stringify(d),contentType:"application/json"});e.done(function(a){0,PANDOX.SYSTEM.createAuthCookie(a.token),window.location.assign("/conta")}),e.fail(function(a){0;var b=a.responseJSON;$.each(b,function(a,b){PANDOX.FORM.markErrorOnField(b.field,b.message)}),$("#loading").hide(),$("#btn-submit").show()})}};return{init:a,validateForm:b}}(),PANDOX.FORM=function(){var a=function(){},b=function(a,b){$("#g-"+a).addClass("has-error has-feedback"),$("#ig-"+a).addClass("glyphicon-remove"),$("#h-"+a).hide(),$("#e-"+a).show(),$("#e-"+a).html(b)};return{init:a,markErrorOnField:b}}(),PANDOX.UTIL=function(){var a=function(){},b=function(a,b){return a.length>=b},c=function(a){return!a||/^\s*$/.test(a)},d=function(a,b){return-1!=a.indexOf(b)};return{init:a,hasMinimum:b,isBlank:c,contains:d}}(),PANDOX.SHOP=function(){var a=function(){0,$("#shop-cart").hide(),c()},b=function(){$.get("/shop/includes/sword.json",function(a){$.each(a,function(){})}).fail(function(){$("#menu-avatar").hide(),$("#menu-login").show()})},c=function(){$(".shop-item").click(function(a){a.preventDefault();var b=$(this).attr("x-item-id");0,$("#shop-display").fadeOut(),$("#shop-cart").show()})};return{init:a,getSwords:b}}(),$(function(){PANDOX.SYSTEM.init(),PANDOX.FORM.init(),PANDOX.UTIL.init(),PANDOX.LOGIN.init(),PANDOX.SHOP.init(),$.getJSON("/resources/js/news.json",{}).done(function(a){$("#template-container").loadTemplate("/views/news.html",a,{isFile:!0})}),$("li").removeClass("active");var a=location.pathname;"/"===a?$("#logo").addClass("active"):(a.replace("#",""),PANDOX.UTIL.contains(a,"conta")&&$("#menu-avatar").addClass("active"),PANDOX.UTIL.contains(a,"guia")&&$("#menu-guia").addClass("active"),PANDOX.UTIL.contains(a,"shop")&&$("#menu-shop").addClass("active"),0,$("a[href='"+a+"']").parent().addClass("active"));var b=["login","password","passwordconfirm","email"];$.each(b,function(a,b){$("#i-"+b).focus(function(){clearInput(b)})}),$("#criarConta").submit(function(a){a.preventDefault(),$("#loading").show(),$("#btn-submit").hide(),$.each(b,function(){clearInput("login")});var c=!1;clearInput("login"),clearInput("pass"),clearInput("passconfirm");var d=$("#i-login").val();PANDOX.UTIL.isBlank(d)?(c=!0,PANDOX.FORM.markErrorOnField("login")):loginExist(d)&&(0,c=!0,PANDOX.FORM.markErrorOnField("login"));var e=$("#i-password").val(),f=$("#i-passwordconfirm").val();(PANDOX.UTIL.isBlank(e)||PANDOX.UTIL.isBlank(f)||!PANDOX.UTIL.hasMinimum(e,5)||e!=f)&&(c=!0,PANDOX.FORM.markErrorOnField("password"),PANDOX.FORM.markErrorOnField("passwordconfirm"));var g=$("#i-email").val();if(PANDOX.UTIL.isBlank(g)&&(c=!0,PANDOX.FORM.markErrorOnField("email")),c)$("#loading").hide(),$("#btn-submit").show();else{var h={login:d,password:e,name:"matheus",email:"a@a.com"},i=$.ajax({url:"/api/account",type:"POST",data:JSON.stringify(h),contentType:"application/json"});i.done(function(a){0,$("#account-template").hide().loadTemplate("/conta/sucesso.html",a).fadeIn(1500)}),i.fail(function(a){var b=a.responseJSON;$.each(b,function(a,b){PANDOX.FORM.markErrorOnField(b.field,b.message)}),$("#loading").hide(),$("#btn-submit").show()})}return!1})});